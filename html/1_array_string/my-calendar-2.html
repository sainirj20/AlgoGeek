<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
  <link rel="stylesheet" href="../../css/snippet.css">
  <link rel="stylesheet" href="../../css/solution.css">
  <link rel="stylesheet" href="../../css/tab.css">
</head>
<body>
    <h1>LeetCode Problem</h1>
    <section class="section" style="--c: black">
        <question_title>731. My Calendar II</question_title>
        <a href="https://leetcode.com/problems/my-calendar-ii/description/">Link to LeetCode</a>
        <question>
            You are implementing a program to use as your calendar. We can add a new event if adding the event will not cause a triple booking.

            A triple booking happens when three events have some non-empty intersection (i.e., some moment is common to all the three events.).

            The event can be represented as a pair of integers startTime and endTime that represents a booking on the half-open interval [startTime, endTime), the range of real numbers x such that startTime <= x < endTime.

            Implement the MyCalendarTwo class:

            <i><b>MyCalendarTwo()</b></i> Initializes the calendar object.
            <i><b>boolean book(int startTime, int endTime)</b></i> Returns true if the event can be added to the calendar successfully without causing a triple booking. Otherwise, return false and do not add the event to the calendar.
        </question>
        <question>
            <b>Input</b>
            ["MyCalendarTwo", "book", "book", "book", "book", "book", "book"]
            [[], [10, 20], [50, 60], [10, 40], [5, 15], [5, 10], [25, 55]]
            <b>Output</b>
            [null, true, true, true, false, true, true]

            <b>Explanation</b>
            MyCalendarTwo myCalendarTwo = new MyCalendarTwo();
            myCalendarTwo.book(10, 20); // return True, The event can be booked. 
            myCalendarTwo.book(50, 60); // return True, The event can be booked. 
            myCalendarTwo.book(10, 40); // return True, The event can be double booked. 
            myCalendarTwo.book(5, 15);  // return False, The event cannot be booked, because it would result in a triple booking.
            myCalendarTwo.book(5, 10); // return True, The event can be booked, as it does not use time 10 which is already double booked.
            myCalendarTwo.book(25, 55); // return True, The event can be booked, as the time in [25, 40) will be double booked with the third event, the time [40, 50) will be single booked, and the time [50, 55) will be double booked with the second event.
        </question>
        <notes>
            <b>Analysis</b>
            This is a more complicated version of <a href="https://leetcode.com/problems/my-calendar-i/description/">My Calendar I</a>, in which we only care if a time interval is used already. For this problem, we can add another list to track the double booked intervals.
            Time complexity is <x>O(N^2)</x> as each book operation iterate over all existing intervals. Space complexity is <x>O(N)</x>.
        </notes>
        <snippet>
class MyCalendarTwo {
    ArrayList<int[]> single = null;
    ArrayList<int[]> overlap = null;
 
    public MyCalendarTwo() {
        single = new ArrayList<>();
        overlap = new ArrayList<>();
    }
 
    public boolean book(int start, int end) {
        for (int[] itv : overlap) {
            if (end > itv[0] && start < itv[1]) {
                return false;
            }
        }
 
        for (int[] itv : single) {
            if (end > itv[0] && start < itv[1]) {
                overlap.add(new int[]{Math.max(itv[0], start), Math.min(itv[1], end)});
            }
        }
 
        single.add(new int[]{start, end});
 
        return true;
    }
}
        </snippet>
    </section>
</body>
<script src="../../js/solution.js"> </script>
<script src="../../js/snippet.js"> </script>
<script src="../../js/footer.js"> </script>
</html>